<app-header></app-header>
<div class="row">
    <div class="d-none d-xl-block menu-container bg-color1 p-0 m-0 pt-5">
        <app-menu></app-menu>
    </div>

    <div class="container-container flex-1 bg-color5 p-5">        
        
        <div class="col-12">
            <div class="d-flex justify-content-between my-3">
                <h4> Usuarios </h4>
                <button (click)="addEdit()" class="btn1">Agregar Usuario</button>
            </div>
        
            <ul class="list-group">
                <li *ngFor="let user of users" class="list-group-item d-flex justify-content-between align-items-center">
                    <div>
                        <h5 class="mb-1">{{user.name}}</h5>
                        <p class="d-block">{{user.email}}</p>
                        <span class="text-color1">{{user.role}}</span>                       
                    </div>
                    
                    <div class="ml-4">
                        <button (click)="addEdit(user)" class="btn2 p-0 pt-1 pb-1 pl-4 pr-4 mr-3">Editar</button>
                        <button (click)="confirm($event, user._id)" class="btn1 bg-danger p-0 pt-1 pb-1 pl-4 pr-4">Eliminar</button>
                    </div>
                    
                </li>
            </ul>
    </div>
</div>

<p-dialog 
    header="" 
    [(visible)]="displayModal" 
    [modal]="true" 
    [styleClass]="'modalAddEdit'" 
    [baseZIndex]="10000"
    [draggable]="false"
    [resizable]="false"
    [autoZIndex]="false"
    >

    <div class="row m-0 justify-content-center">
        <div class="row m-0 p-0 flex-column">
            <div class="mt-2">
                <label class="w-100">Nombre</label>
                <input type="text" placeholder="Nombre" [(ngModel)]="userForm.name">
            </div>
            <div class="mt-2">
                <label class="w-100">Correo</label>
                <input type="email" placeholder="Correo" [(ngModel)]="userForm.email">
            </div>
            <div class="mt-2">
                <label class="w-100">Contraseña</label>
                <input type="password" placeholder="Contraseña" [(ngModel)]="userForm.password">
            </div>
            <div class="mt-2">
                <label class="w-100">Rol</label>
                <select [(ngModel)]="userForm.role">
                    <option value="">Seleccione un rol</option>
                    <option value="Administrador">Administrador</option>
                    <option value="Ejecutivo">Ejecutivo</option>
                    <option value="Paciente">Paciente</option>
                    <option value="Doctor">Doctor</option>
                </select>
            </div>  
            <div class="mt-4">
                <button class="btn1 w-100" (click)="save()" >Guardar</button>
            </div>                 
        </div>
    </div>

</p-dialog>

<p-confirmPopup [baseZIndex]="10001" ></p-confirmPopup>
<p-toast></p-toast>