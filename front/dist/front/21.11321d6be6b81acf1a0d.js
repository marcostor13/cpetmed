(window.webpackJsonp=window.webpackJsonp||[]).push([[21],{IfBl:function(e,t,n){"use strict";n.r(t),n.d(t,"UrlsModule",(function(){return ye}));var i=n("ofXK"),a=n("tyNb"),l=n("33Jv");class s{constructor(){this._id=null,this.url="",this.text="",this.whatsappNumber="",this.whatsappText="",this.companyName="",this.shortUrl="",this.landingID=null,this.parameters=null,this.listID="",this.companyID="",this.longURL="",this.typeURL="",this.nameExcel="",this.listName="",this.fieldURL="",this.date=null,this.code=""}}var c=n("XIp8"),r=n("fXoL"),o=n("FQVY"),b=n("7mqn"),d=n("lgNR"),p=n("7zfz"),u=n("F56f"),h=n("aZ8m"),g=n("Nf9I"),m=n("xlun"),f=n("Q4Mo"),v=n("YyRF");function R(e,t){1&e&&r.Nb(0)}function y(e,t){if(1&e&&(r.Pb(0),r.Dc(1,R,1,0,"ng-container",3),r.Ob()),2&e){const e=r.bc(2);r.zb(1),r.ic("ngTemplateOutlet",e.contentTemplate)}}function C(e,t){if(1&e&&(r.Rb(0,"div",1),r.gc(1),r.Dc(2,y,2,1,"ng-container",2),r.Qb()),2&e){const e=r.bc();r.ic("hidden",!e.selected),r.Ab("id",e.id)("aria-hidden",!e.selected)("aria-labelledby",e.id+"-label"),r.zb(2),r.ic("ngIf",e.contentTemplate&&(e.cache?e.loaded:e.selected))}}const w=["*"],Q=["navbar"],x=["inkbar"];function M(e,t){if(1&e&&r.Mb(0,"span",16),2&e){const e=r.bc(3).$implicit;r.ic("ngClass",e.leftIcon)}}function L(e,t){if(1&e&&r.Mb(0,"span",17),2&e){const e=r.bc(3).$implicit;r.ic("ngClass",e.rightIcon)}}function S(e,t){if(1&e&&(r.Pb(0),r.Dc(1,M,1,1,"span",13),r.Rb(2,"span",14),r.Fc(3),r.Qb(),r.Dc(4,L,1,1,"span",15),r.Ob()),2&e){const e=r.bc(2).$implicit;r.zb(1),r.ic("ngIf",e.leftIcon),r.zb(2),r.Gc(e.header),r.zb(1),r.ic("ngIf",e.rightIcon)}}function I(e,t){1&e&&r.Nb(0)}function U(e,t){if(1&e){const e=r.Sb();r.Rb(0,"span",18),r.Yb("click",(function(t){r.wc(e);const n=r.bc(2).$implicit;return r.bc().close(t,n)})),r.Qb()}}const k=function(e,t){return{"p-highlight":e,"p-disabled":t}};function O(e,t){if(1&e){const e=r.Sb();r.Rb(0,"li",8),r.Rb(1,"a",9),r.Yb("click",(function(t){r.wc(e);const n=r.bc().$implicit;return r.bc().open(t,n)}))("keydown.enter",(function(t){r.wc(e);const n=r.bc().$implicit;return r.bc().open(t,n)})),r.Dc(2,S,5,3,"ng-container",10),r.Dc(3,I,1,0,"ng-container",11),r.Dc(4,U,1,0,"span",12),r.Qb(),r.Qb()}if(2&e){const e=r.bc().$implicit;r.Bb(e.headerStyleClass),r.ic("ngClass",r.mc(16,k,e.selected,e.disabled))("ngStyle",e.headerStyle),r.zb(1),r.ic("pTooltip",e.tooltip)("tooltipPosition",e.tooltipPosition)("positionStyle",e.tooltipPositionStyle)("tooltipStyleClass",e.tooltipStyleClass),r.Ab("id",e.id+"-label")("aria-selected",e.selected)("aria-controls",e.id)("aria-selected",e.selected)("tabindex",e.disabled?null:"0"),r.zb(1),r.ic("ngIf",!e.headerTemplate),r.zb(1),r.ic("ngTemplateOutlet",e.headerTemplate),r.zb(1),r.ic("ngIf",e.closable)}}function F(e,t){1&e&&r.Dc(0,O,5,19,"li",7),2&e&&r.ic("ngIf",!t.$implicit.closed)}let D=0,z=(()=>{class e{constructor(e,t,n){this.viewContainer=t,this.cd=n,this.cache=!0,this.tooltipPosition="top",this.tooltipPositionStyle="absolute",this.id="p-tabpanel-"+D++,this.tabView=e}ngAfterContentInit(){this.templates.forEach(e=>{switch(e.getType()){case"header":this.headerTemplate=e.template;break;case"content":default:this.contentTemplate=e.template}})}get selected(){return this._selected}set selected(e){this._selected=e,this.loaded||this.cd.detectChanges(),this.loaded=!0}get disabled(){return this._disabled}set disabled(e){this._disabled=e,this.tabView.cd.markForCheck()}ngOnDestroy(){this.view=null}}return e.\u0275fac=function(t){return new(t||e)(r.Lb(Object(r.T)(()=>P)),r.Lb(r.P),r.Lb(r.h))},e.\u0275cmp=r.Fb({type:e,selectors:[["p-tabPanel"]],contentQueries:function(e,t,n){var i;1&e&&r.Eb(n,p.h,!1),2&e&&r.uc(i=r.Zb())&&(t.templates=i)},inputs:{cache:"cache",tooltipPosition:"tooltipPosition",tooltipPositionStyle:"tooltipPositionStyle",selected:"selected",disabled:"disabled",header:"header",closable:"closable",headerStyle:"headerStyle",headerStyleClass:"headerStyleClass",leftIcon:"leftIcon",rightIcon:"rightIcon",tooltip:"tooltip",tooltipStyleClass:"tooltipStyleClass"},ngContentSelectors:w,decls:1,vars:1,consts:[["class","p-tabview-panel","role","tabpanel",3,"hidden",4,"ngIf"],["role","tabpanel",1,"p-tabview-panel",3,"hidden"],[4,"ngIf"],[4,"ngTemplateOutlet"]],template:function(e,t){1&e&&(r.hc(),r.Dc(0,C,3,5,"div",0)),2&e&&r.ic("ngIf",!t.closed)},directives:[i.m,i.r],encapsulation:2}),e})(),P=(()=>{class e{constructor(e,t){this.el=e,this.cd=t,this.orientation="top",this.onChange=new r.n,this.onClose=new r.n,this.activeIndexChange=new r.n}ngAfterContentInit(){this.initTabs(),this.tabPanels.changes.subscribe(e=>{this.initTabs()})}ngAfterViewChecked(){this.tabChanged&&(this.updateInkBar(),this.tabChanged=!1)}initTabs(){this.tabs=this.tabPanels.toArray(),!this.findSelectedTab()&&this.tabs.length&&(null!=this.activeIndex&&this.tabs.length>this.activeIndex?this.tabs[this.activeIndex].selected=!0:this.tabs[0].selected=!0,this.tabChanged=!0),this.cd.markForCheck()}open(e,t){if(t.disabled)e&&e.preventDefault();else{if(!t.selected){let n=this.findSelectedTab();n&&(n.selected=!1),this.tabChanged=!0,t.selected=!0;let i=this.findTabIndex(t);this.preventActiveIndexPropagation=!0,this.activeIndexChange.emit(i),this.onChange.emit({originalEvent:e,index:i})}e&&e.preventDefault()}}close(e,t){this.controlClose?this.onClose.emit({originalEvent:e,index:this.findTabIndex(t),close:()=>{this.closeTab(t)}}):(this.closeTab(t),this.onClose.emit({originalEvent:e,index:this.findTabIndex(t)})),e.stopPropagation()}closeTab(e){if(!e.disabled){if(e.selected){this.tabChanged=!0,e.selected=!1;for(let t=0;t<this.tabs.length;t++){let n=this.tabs[t];if(!n.closed&&!e.disabled){n.selected=!0;break}}}e.closed=!0}}findSelectedTab(){for(let e=0;e<this.tabs.length;e++)if(this.tabs[e].selected)return this.tabs[e];return null}findTabIndex(e){let t=-1;for(let n=0;n<this.tabs.length;n++)if(this.tabs[n]==e){t=n;break}return t}getBlockableElement(){return this.el.nativeElement.children[0]}get activeIndex(){return this._activeIndex}set activeIndex(e){this._activeIndex=e,this.preventActiveIndexPropagation?this.preventActiveIndexPropagation=!1:this.tabs&&this.tabs.length&&null!=this._activeIndex&&this.tabs.length>this._activeIndex&&(this.findSelectedTab().selected=!1,this.tabs[this._activeIndex].selected=!0)}updateInkBar(){let e=v.b.findSingle(this.navbar.nativeElement,"li.p-highlight");this.inkbar.nativeElement.style.width=v.b.getWidth(e)+"px",this.inkbar.nativeElement.style.left=v.b.getOffset(e).left-v.b.getOffset(this.navbar.nativeElement).left+"px"}}return e.\u0275fac=function(t){return new(t||e)(r.Lb(r.l),r.Lb(r.h))},e.\u0275cmp=r.Fb({type:e,selectors:[["p-tabView"]],contentQueries:function(e,t,n){var i;1&e&&r.Eb(n,z,!1),2&e&&r.uc(i=r.Zb())&&(t.tabPanels=i)},viewQuery:function(e,t){var n;1&e&&(r.Jc(Q,!0),r.Jc(x,!0)),2&e&&(r.uc(n=r.Zb())&&(t.navbar=n.first),r.uc(n=r.Zb())&&(t.inkbar=n.first))},inputs:{orientation:"orientation",activeIndex:"activeIndex",style:"style",styleClass:"styleClass",controlClose:"controlClose"},outputs:{onChange:"onChange",onClose:"onClose",activeIndexChange:"activeIndexChange"},ngContentSelectors:w,decls:8,vars:5,consts:[[3,"ngClass","ngStyle"],["role","tablist",1,"p-tabview-nav"],["navbar",""],["ngFor","",3,"ngForOf"],[1,"p-tabview-ink-bar"],["inkbar",""],[1,"p-tabview-panels"],["role","presentation",3,"ngClass","ngStyle","class",4,"ngIf"],["role","presentation",3,"ngClass","ngStyle"],["role","tab","pRipple","",1,"p-tabview-nav-link",3,"pTooltip","tooltipPosition","positionStyle","tooltipStyleClass","click","keydown.enter"],[4,"ngIf"],[4,"ngTemplateOutlet"],["class","p-tabview-close pi pi-times",3,"click",4,"ngIf"],["class","p-tabview-left-icon",3,"ngClass",4,"ngIf"],[1,"p-tabview-title"],["class","p-tabview-right-icon",3,"ngClass",4,"ngIf"],[1,"p-tabview-left-icon",3,"ngClass"],[1,"p-tabview-right-icon",3,"ngClass"],[1,"p-tabview-close","pi","pi-times",3,"click"]],template:function(e,t){1&e&&(r.hc(),r.Rb(0,"div",0),r.Rb(1,"ul",1,2),r.Dc(3,F,1,1,"ng-template",3),r.Mb(4,"li",4,5),r.Qb(),r.Rb(6,"div",6),r.gc(7),r.Qb(),r.Qb()),2&e&&(r.Bb(t.styleClass),r.ic("ngClass","p-tabview p-component")("ngStyle",t.style),r.zb(3),r.ic("ngForOf",t.tabs))},directives:[i.k,i.n,i.l,i.m,f.a,m.a,i.r],styles:[".p-tabview-nav{display:flex;flex-wrap:wrap;list-style-type:none;margin:0;padding:0}.p-tabview-nav-link{-ms-user-select:none;-webkit-user-select:none;align-items:center;cursor:pointer;display:flex;overflow:hidden;position:relative;text-decoration:none;user-select:none}.p-tabview-ink-bar{display:none;z-index:1}.p-tabview-nav-link:focus{z-index:1}.p-tabview-title{line-height:1}.p-tabview-close{z-index:1}"],encapsulation:2,changeDetection:0}),e})(),T=(()=>{class e{}return e.\u0275mod=r.Jb({type:e}),e.\u0275inj=r.Ib({factory:function(t){return new(t||e)},imports:[[i.c,p.i,m.b,f.b],p.i]}),e})();var _=n("NCSE"),j=n("3Pt+"),Y=n("cQJI"),E=n("dts7"),N=n("/RsI"),B=n("+07z"),$=n("LuMj"),V=n("arFO");function A(e,t){if(1&e){const e=r.Sb();r.Rb(0,"div",36),r.Rb(1,"div",37),r.Fc(2),r.Qb(),r.Rb(3,"button",38),r.Yb("click",(function(){return r.wc(e),r.bc().downloadList()})),r.Fc(4,"Descargar"),r.Qb(),r.Qb()}if(2&e){const e=r.bc();r.zb(2),r.Hc("",e.currentURLS.length," URLs creadas")}}function G(e,t){if(1&e&&(r.Rb(0,"div"),r.Rb(1,"div"),r.Fc(2),r.Qb(),r.Qb()),2&e){const e=t.$implicit;r.zb(2),r.Gc(e.name)}}function J(e,t){1&e&&r.Nb(0)}function W(e,t){if(1&e&&(r.Rb(0,"div"),r.Rb(1,"div"),r.Fc(2),r.Qb(),r.Qb()),2&e){const e=t.$implicit;r.zb(2),r.Gc(e.name)}}function q(e,t){if(1&e){const e=r.Sb();r.Pb(0),r.Rb(1,"p-listbox",44),r.Yb("ngModelChange",(function(t){return r.wc(e),r.bc(2).url.fieldURL=t})),r.Dc(2,W,3,1,"ng-template",26),r.Qb(),r.Ob()}if(2&e){const e=r.bc(2);r.zb(1),r.ic("options",e.dataExcelParameters)("ngModel",e.url.fieldURL)("metaKeySelection",!1)("checkbox",!0)("filter",!0)}}const K=function(e){return{invalid:e}};function Z(e,t){if(1&e){const e=r.Sb();r.Pb(0),r.Mb(1,"hr",17),r.Rb(2,"div",8),r.Rb(3,"h5"),r.Fc(4,"Par\xe1metros"),r.Qb(),r.Qb(),r.Rb(5,"div",9),r.Rb(6,"label",39),r.Fc(7,"Seleccione los par\xe1metros para generar las URLs"),r.Qb(),r.Rb(8,"p-listbox",40),r.Yb("ngModelChange",(function(t){return r.wc(e),r.bc().parametersMultiple=t})),r.Dc(9,G,3,1,"ng-template",26),r.Qb(),r.Qb(),r.Mb(10,"hr",17),r.Rb(11,"div",8),r.Rb(12,"h5"),r.Fc(13,"Lista"),r.Qb(),r.Qb(),r.Rb(14,"div",9),r.Rb(15,"input",41),r.Yb("ngModelChange",(function(t){return r.wc(e),r.bc().url.listName=t})),r.Qb(),r.Qb(),r.Mb(16,"hr",17),r.Dc(17,J,1,0,"ng-container",16),r.Rb(18,"div",9),r.Rb(19,"p-radioButton",42),r.Yb("ngModelChange",(function(t){return r.wc(e),r.bc().typeURL=t})),r.Qb(),r.Rb(20,"label",43),r.Fc(21,"Desde Archivo"),r.Qb(),r.Rb(22,"label",43),r.Fc(23,"(Seleccione el campo que contiene la URL)"),r.Qb(),r.Dc(24,q,3,5,"ng-container",14),r.Qb(),r.Mb(25,"hr",17),r.Rb(26,"div",8),r.Rb(27,"h5"),r.Fc(28,"Datos de URL"),r.Qb(),r.Qb(),r.Rb(29,"div",9),r.Rb(30,"div"),r.Rb(31,"label",18),r.Fc(32,"Empresa (Opcional)"),r.Qb(),r.Rb(33,"input",19),r.Yb("keyup",(function(t){return r.wc(e),r.bc().issetCompanyNameAndText(t.target.value)}))("ngModelChange",(function(t){return r.wc(e),r.bc().url.companyName=t})),r.Qb(),r.Qb(),r.Qb(),r.Mb(34,"p-messages",27),r.Rb(35,"div",28),r.Rb(36,"button",30),r.Yb("click",(function(){return r.wc(e),r.bc().generateMultipleURL()})),r.Fc(37,"Generar"),r.Qb(),r.Qb(),r.Ob()}if(2&e){const e=r.bc(),t=r.vc(59);r.zb(8),r.ic("options",e.dataExcelParameters)("ngModel",e.parametersMultiple)("metaKeySelection",!1)("checkbox",!0)("filter",!0)("multiple",!0),r.zb(7),r.ic("ngClass",r.lc(13,K,e.invalid&&""===e.url.listName))("ngModel",e.url.listName),r.zb(2),r.ic("ngTemplateOutlet",t),r.zb(2),r.ic("ngModel",e.typeURL),r.zb(5),r.ic("ngIf","FromFile"===e.typeURL),r.zb(9),r.ic("ngModel",e.url.companyName),r.zb(1),r.ic("closable",!0)}}function X(e,t){1&e&&r.Nb(0)}const H=function(e,t){return{"text-danger":e,"text-success":t}};function ee(e,t){if(1&e&&(r.Rb(0,"span",45),r.Fc(1),r.Qb()),2&e){const e=r.bc();r.ic("ngClass",r.mc(2,H,!e.validText,e.validText)),r.zb(1),r.Gc(e.validText?"V\xe1lido":"Ya existe, elija otro")}}function te(e,t){if(1&e){const e=r.Sb();r.Rb(0,"div",46),r.Rb(1,"span"),r.Fc(2),r.Qb(),r.Rb(3,"div"),r.Rb(4,"button",47),r.Yb("click",(function(){r.wc(e);const n=t.$implicit;return r.bc().edit(n)})),r.Mb(5,"i",48),r.Qb(),r.Rb(6,"button",49),r.Yb("click",(function(){r.wc(e);const n=t.$implicit,i=r.bc();return i.delete(n._id,i.i)})),r.Mb(7,"i",50),r.Qb(),r.Qb(),r.Qb()}if(2&e){const e=t.$implicit;r.zb(2),r.Gc(e.name)}}function ne(e,t){if(1&e&&(r.Rb(0,"div",51),r.Rb(1,"h5"),r.Fc(2,"URL Corta "),r.Qb(),r.Rb(3,"div",52),r.Rb(4,"a",53),r.Fc(5),r.Qb(),r.Qb(),r.Qb()),2&e){const e=r.bc();r.zb(4),r.jc("href",e.currenrURLData.shortUrl,r.yc),r.zb(1),r.Gc(e.currenrURLData.shortUrl)}}function ie(e,t){if(1&e){const e=r.Sb();r.Rb(0,"div",8),r.Rb(1,"h5"),r.Fc(2,"Empresa"),r.Qb(),r.Qb(),r.Rb(3,"div",9),r.Rb(4,"div",54),r.Rb(5,"p-dropdown",55),r.Yb("ngModelChange",(function(t){return r.wc(e),r.bc().url.companyID=t})),r.Qb(),r.Qb(),r.Qb(),r.Mb(6,"hr",17),r.Rb(7,"div",8),r.Rb(8,"h5"),r.Fc(9,"Tipo de URL"),r.Qb(),r.Qb(),r.Rb(10,"div",9),r.Rb(11,"div",56),r.Rb(12,"p-radioButton",57),r.Yb("ngModelChange",(function(t){return r.wc(e),r.bc().typeURL=t})),r.Qb(),r.Rb(13,"label",43),r.Fc(14,"URL"),r.Qb(),r.Rb(15,"input",58),r.Yb("ngModelChange",(function(t){return r.wc(e),r.bc().url.url=t})),r.Qb(),r.Qb(),r.Rb(16,"div",59),r.Rb(17,"p-radioButton",60),r.Yb("ngModelChange",(function(t){return r.wc(e),r.bc().typeURL=t})),r.Qb(),r.Rb(18,"label",43),r.Fc(19,"Landing"),r.Qb(),r.Rb(20,"p-dropdown",61),r.Yb("ngModelChange",(function(t){return r.wc(e),r.bc().url.landingID=t})),r.Qb(),r.Qb(),r.Rb(21,"div",59),r.Rb(22,"p-radioButton",62),r.Yb("ngModelChange",(function(t){return r.wc(e),r.bc().typeURL=t})),r.Qb(),r.Rb(23,"label",43),r.Fc(24,"Whastapp"),r.Qb(),r.Rb(25,"label",63),r.Fc(26,"N\xfamero (Ej:51987654321)"),r.Qb(),r.Rb(27,"input",64),r.Yb("ngModelChange",(function(t){return r.wc(e),r.bc().url.whatsappNumber=t})),r.Qb(),r.Rb(28,"label",65),r.Fc(29,"Texto (Variable entre par\xe9ntesis)"),r.Qb(),r.Rb(30,"textarea",66),r.Yb("ngModelChange",(function(t){return r.wc(e),r.bc().url.whatsappText=t})),r.Qb(),r.Qb(),r.Qb()}if(2&e){const e=r.bc();r.zb(5),r.ic("options",e.companies)("styleClass","w-100 select ")("ngModel",e.url.companyID),r.zb(7),r.ic("ngModel",e.typeURL),r.zb(3),r.ic("disabled","URL"!==e.typeURL)("ngModel",e.url.url)("ngClass",r.lc(19,K,e.invalid&&""==e.url.url&&"URL"===e.typeURL)),r.zb(2),r.ic("ngModel",e.typeURL),r.zb(3),r.ic("disabled","Landing"!==e.typeURL)("options",e.landings)("styleClass","mt-2 flex-1 w-100 select "+(!e.url.landingID&&e.invalid&&"Landing"===e.typeURL?"invalid":""))("ngModel",e.url.landingID),r.zb(2),r.ic("ngModel",e.typeURL),r.zb(5),r.ic("disabled","Whatsapp"!==e.typeURL)("ngModel",e.url.whatsappNumber)("ngClass",r.lc(21,K,e.invalid&&""==e.url.whatsappNumber&&"Whatsapp"===e.typeURL)),r.zb(3),r.ic("disabled","Whatsapp"!==e.typeURL)("ngModel",e.url.whatsappText)("ngClass",r.lc(23,K,e.invalid&&""==e.url.whatsappText&&"Whatsapp"===e.typeURL))}}const ae=function(e){return{width:e}},le=function(){return{"min-heigth":"400px"}};let se=(()=>{class e{constructor(e,t,n,i,a,c,r){this.general=e,this.landingsService=t,this.urlService=n,this.messageService=i,this.confirmationService=a,this.router=c,this.companyService=r,this.subs=new l.a,this.modal=!1,this.invalid=!1,this.url=new s,this.typeURL="URL",this.parameters=[],this.parametersMultiple=[],this.parameter={name:"",value:""},this.currenrURLData=new s,this.validText=!0}ngOnInit(){this.getLandings(),this.getCompanies(),this.general.isLoad("0")}addParameter(){this.parameter&&(this.parameters=[...this.parameters,this.parameter],this.parameter={name:"",value:""})}getLandings(){this.subs.add(this.landingsService.getLandings().subscribe(e=>{this.landings=Object(c.a)(e.data)}))}openModal(){this.modal=!0}getCompanies(){this.subs.add(this.companyService.getCompanies().subscribe(e=>{this.companies=Object(c.a)(e.data)}))}validate(){this.messageService.clear();let e=!0;return this.invalid=!1,("URL"!==this.typeURL||this.url.url)&&("Landing"!==this.typeURL||this.url.landingID)&&("Whatsapp"!==this.typeURL||this.url.whatsappNumber&&this.url.whatsappText)||(e=!1,this.invalid=!0,this.messageService.add({severity:"error",summary:"Validaci\xf3n",detail:"Debe completar los datos requeridos"})),!this.url.companyName||""!==this.url.text&&this.validText||(e=!1,this.invalid=!0,this.messageService.add({severity:"error",summary:"Validaci\xf3n",detail:"Debe completar el texto de la url"})),{isValid:e,responses:[]}}validateMultiple(){this.messageService.clear();let e=!0;return this.invalid=!1,("URL"!==this.typeURL||this.url.url)&&("Landing"!==this.typeURL||this.url.landingID)&&("Whatsapp"!==this.typeURL||this.url.whatsappNumber&&this.url.whatsappText)||(e=!1,this.invalid=!0,this.messageService.add({severity:"error",summary:"Validaci\xf3n",detail:"Debe completar los datos requeridos"})),this.url.listName||(e=!1,this.invalid=!0,this.messageService.add({severity:"error",summary:"Validaci\xf3n",detail:"Debe completar el texto de la url"})),{isValid:e,responses:[]}}generateURL(){this.url.typeURL=this.typeURL,this.url.parameters=this.parameters,this.validate().isValid&&(this.general.isLoad("1"),this.general.c("generateURL",this.url),this.subs.add(this.urlService.saveURL(this.url).subscribe(e=>{this.general.isLoad("0"),this.currenrURLData=Object(c.a)(e.data),this.url=new s,this.messageService.add({severity:"success",summary:"\xc9xito",detail:e.message})})))}issetCompanyNameAndText(e){""!==e&&this.subs.add(this.urlService.issetCompanyNameAndText({companyName:this.url.companyName,text:this.url.text}).subscribe(e=>{this.validText=!(e.data&&e.data.length>0)}))}onUploadExcel(e){this.dataExcelParameters=[];const t=e.currentFiles[0],n=new FileReader;n.onload=e=>{this.url.dataExcel=[...this.general.importFromFile(e.target.result)],Object.keys(this.url.dataExcel[0]).map(e=>{this.dataExcelParameters.push({name:e})})},n.onerror=e=>{this.general.c("ERROR Import Excel",e)},n.readAsBinaryString(t)}generateMultipleURL(){const e=[];this.parametersMultiple.map(t=>{e.push(t.name)}),this.url.typeURL=this.typeURL,this.url.parameters=this.parametersMultiple,this.validateMultiple().isValid&&(this.general.isLoad("1"),this.general.c("generateMultiple URL",this.url),this.subs.add(this.urlService.saveMultipleURL(this.url).subscribe(e=>{this.general.isLoad("0"),this.subs.add(this.urlService.getUrlsByList(e.data).subscribe(e=>{this.currentURLS=Object(c.a)(e.data)})),this.url=new s,this.messageService.add({severity:"success",summary:"\xc9xito",detail:e.message})})))}downloadList(){let e=[];this.currentURLS.map(t=>{let n={};for(const e in t.parameters){let i={};i[e]=t.parameters[e],n=Object.assign(Object.assign({},n),i)}n=Object.assign(Object.assign({},n),{"Url Corta":t.shortUrl}),e=[...e,n]}),this.general.exportToFile(e,"export_"+(new Date).toISOString().slice(0,10))}back(){window.location.href="/urls/list"}}return e.\u0275fac=function(t){return new(t||e)(r.Lb(o.a),r.Lb(b.a),r.Lb(d.a),r.Lb(p.f),r.Lb(p.a),r.Lb(a.b),r.Lb(u.a))},e.\u0275cmp=r.Fb({type:e,selectors:[["app-add"]],decls:60,vars:25,consts:[[1,"container","pb-5"],["header","Confirmaci\xf3n","icon","pi pi-exclamation-triangle"],[1,"col-12","mt-5","row","m-0","justify-content-between","align-items-center"],[1,"btn1",3,"click"],[1,"pi","pi-angle-left"],["styleClass","mt-4"],["header","Multiple"],[1,"p-0","col-12","mt-3","d-flex","flex-wrap"],[1,"col-12","mt-2","row","m-0","justify-content-between","align-items-center"],[1,"col-12","col-md-6","mt-3"],[1,"col-12","p-0","col-md-6","mt-2"],["styleClass","btn1","mode","basic","multiple","false","accept",".xls,.xlsx","maxFileSize","1000000","uploadLabel","Subir","cancelLabel","Cancelar","invalidFileSizeMessageDetail","El tama\xf1o m\xe1ximo es {0}.",3,"chooseLabel","auto","onSelect"],[1,"loading"],["class","col-12 col-md-6 mt-3 row m-0 justify-content-between align-items-center",4,"ngIf"],[4,"ngIf"],["header","Simple"],[4,"ngTemplateOutlet"],[1,"line","col-12","mt-5"],[1,"col-12","mt-2","ml-3","m-0","label"],["placeholder","Ingrese empresa","type","text","pInputText","",1,"col-12","mt-2",3,"ngModel","keyup","ngModelChange"],[1,"mt-2"],["placeholder","Ingrese texto","type","text","pInputText","",1,"col-12","mt-2",3,"ngClass","ngModel","keyup","ngModelChange"],[3,"ngClass",4,"ngIf"],[1,"col-12","mt-3","row","m-0","justify-content-between","align-items-center"],[1,"col-12","mt-5"],["filterBy","name",3,"value"],["pTemplate","item"],[3,"closable"],[1,"col-12","m-0","mt-4","justify-content-between","row","align-items-center","flex-wrap"],["class","row m-0 align-items-center mt-3",4,"ngIf"],[1,"btn2","mt-3","col-12","col-md-4",3,"click"],["styleClass","col-11",3,"header","visible","visibleChange"],["placeholder","Ingrese nombre","type","text","pInputText","",1,"flex-1","mt-2",3,"ngModel","ngModelChange"],["placeholder","Ingrese valor","type","text","pInputText","",1,"flex-1","mt-2",3,"ngModel","ngModelChange"],[1,"mt-3","col-12","row","m-0","justify-content-end"],["urlData",""],[1,"col-12","col-md-6","mt-3","row","m-0","justify-content-between","align-items-center"],[1,"padButton","bg-white","text-color1","rounded","pl-5","pr-5","shadow"],[1,"btn2",3,"click"],[1,"mb-3","mt-3"],["optionLabel","name",3,"options","ngModel","metaKeySelection","checkbox","filter","multiple","ngModelChange"],["placeholder","Ingrese lista","type","text","pInputText","",1,"col-12","mt-2",3,"ngClass","ngModel","ngModelChange"],["name","groupname","value","FromFile",1,"mt-2",3,"ngModel","ngModelChange"],[1,"mt-2","ml-3","m-0","label"],["optionLabel","name","styleClass","mt-3",3,"options","ngModel","metaKeySelection","checkbox","filter","ngModelChange"],[3,"ngClass"],[1,"d-flex","justify-content-between","pl-2","pr-2"],[1,"edit",3,"click"],[1,"pi","pi-pencil"],[1,"delete",3,"click"],[1,"pi","pi-trash"],[1,"row","m-0","align-items-center","mt-3"],[1,"bg-color1","shadow","pt-2","pb-2","pl-5","pr-5","ml-4"],["target","_blank",1,"text-white",3,"href"],[1,"col-12","p-0"],["placeholder","Seleccione una empresa","optionLabel","comercialname","optionValue","_id","name","companyid",3,"options","styleClass","ngModel","ngModelChange"],[1,"d-flex","align-items-center","flex-wrap"],["name","groupname","value","URL",1,"mt-2",3,"ngModel","ngModelChange"],["placeholder","Ingrese URL","type","text","pInputText","",1,"flex-1","mt-2",3,"disabled","ngModel","ngClass","ngModelChange"],[1,"d-flex","align-items-center","mt-2","url","flex-wrap"],["name","groupname","value","Landing",1,"mt-2",3,"ngModel","ngModelChange"],["placeholder","Seleccione una landing","optionLabel","name","optionValue","_id","name","landingID",3,"disabled","options","styleClass","ngModel","ngModelChange"],["name","groupname","value","Whatsapp",1,"mt-2",3,"ngModel","ngModelChange"],[1,"mt-4","col-12"],["placeholder","Ingrese numero","type","text","pInputText","",1,"flex-1","mt-2",3,"disabled","ngModel","ngClass","ngModelChange"],[1,"mt-2","col-12"],["placeholder","Ingrese el texto",1,"col-12",3,"disabled","ngModel","ngClass","ngModelChange"]],template:function(e,t){if(1&e&&(r.Mb(0,"app-header"),r.Rb(1,"div",0),r.Mb(2,"p-confirmDialog",1),r.Rb(3,"div",2),r.Rb(4,"h5"),r.Fc(5,"Creaci\xf3n de URLs"),r.Qb(),r.Rb(6,"button",3),r.Yb("click",(function(){return t.back()})),r.Mb(7,"i",4),r.Fc(8," Regresar"),r.Qb(),r.Qb(),r.Rb(9,"p-tabView",5),r.Rb(10,"p-tabPanel",6),r.Rb(11,"div",7),r.Rb(12,"div",8),r.Rb(13,"h5"),r.Fc(14,"Subir excel"),r.Qb(),r.Qb(),r.Rb(15,"div",9),r.Rb(16,"div",10),r.Rb(17,"p-fileUpload",11),r.Yb("onSelect",(function(e){return t.onUploadExcel(e)})),r.Qb(),r.Mb(18,"div",12),r.Qb(),r.Qb(),r.Dc(19,A,5,1,"div",13),r.Dc(20,Z,38,15,"ng-container",14),r.Qb(),r.Qb(),r.Rb(21,"p-tabPanel",15),r.Rb(22,"div",7),r.Dc(23,X,1,0,"ng-container",16),r.Mb(24,"hr",17),r.Rb(25,"div",8),r.Rb(26,"h5"),r.Fc(27,"Datos de URL"),r.Qb(),r.Qb(),r.Rb(28,"div",9),r.Rb(29,"div"),r.Rb(30,"label",18),r.Fc(31,"Empresa (Opcional)"),r.Qb(),r.Rb(32,"input",19),r.Yb("keyup",(function(e){return t.issetCompanyNameAndText(e.target.value)}))("ngModelChange",(function(e){return t.url.companyName=e})),r.Qb(),r.Qb(),r.Rb(33,"div",20),r.Rb(34,"label",18),r.Fc(35,"Texto (Opcional)"),r.Qb(),r.Rb(36,"input",21),r.Yb("keyup",(function(e){return t.issetCompanyNameAndText(e.target.value)}))("ngModelChange",(function(e){return t.url.text=e})),r.Qb(),r.Dc(37,ee,2,5,"span",22),r.Qb(),r.Qb(),r.Mb(38,"hr",17),r.Rb(39,"div",23),r.Rb(40,"h5"),r.Fc(41,"Par\xe1metros"),r.Qb(),r.Rb(42,"button",3),r.Yb("click",(function(){return t.openModal()})),r.Fc(43,"Agregar"),r.Qb(),r.Qb(),r.Rb(44,"div",24),r.Rb(45,"p-orderList",25),r.Dc(46,te,8,1,"ng-template",26),r.Qb(),r.Qb(),r.Qb(),r.Mb(47,"p-messages",27),r.Rb(48,"div",28),r.Dc(49,ne,6,2,"div",29),r.Rb(50,"button",30),r.Yb("click",(function(){return t.generateURL()})),r.Fc(51,"Generar"),r.Qb(),r.Qb(),r.Qb(),r.Qb(),r.Qb(),r.Rb(52,"p-dialog",31),r.Yb("visibleChange",(function(e){return t.modal=e})),r.Rb(53,"input",32),r.Yb("ngModelChange",(function(e){return t.parameter.name=e})),r.Qb(),r.Rb(54,"input",33),r.Yb("ngModelChange",(function(e){return t.parameter.value=e})),r.Qb(),r.Rb(55,"div",34),r.Rb(56,"button",3),r.Yb("click",(function(){return t.addParameter()})),r.Fc(57,"Guardar"),r.Qb(),r.Qb(),r.Qb(),r.Dc(58,ie,31,25,"ng-template",null,35,r.Ec)),2&e){const e=r.vc(59);r.zb(17),r.ic("chooseLabel",t.url.nameExcel||"Seleccione")("auto",!0),r.zb(1),r.Bc(r.lc(20,ae,t.uploadPercentExcel+"%")),r.zb(1),r.ic("ngIf",t.currentURLS),r.zb(1),r.ic("ngIf",t.url.dataExcel),r.zb(3),r.ic("ngTemplateOutlet",e),r.zb(9),r.ic("ngModel",t.url.companyName),r.zb(4),r.ic("ngClass",r.lc(22,K,t.invalid&&""!==t.url.companyName&&(""===t.url.text||!t.validText)))("ngModel",t.url.text),r.zb(1),r.ic("ngIf",""!==t.url.text),r.zb(8),r.ic("value",t.parameters),r.zb(2),r.ic("closable",!0),r.zb(2),r.ic("ngIf",t.currenrURLData.shortUrl),r.zb(3),r.Bc(r.kc(24,le)),r.ic("header","Agregar elementos")("visible",t.modal),r.zb(1),r.ic("ngModel",t.parameter.name),r.zb(1),r.ic("ngModel",t.parameter.value)}},directives:[h.a,g.a,P,z,_.a,i.m,i.r,j.a,j.e,j.f,i.k,Y.a,p.h,E.a,N.a,B.a,$.a,V.a],styles:[".content[_ngcontent-%COMP%]{min-height:400px!important}button[_ngcontent-%COMP%]:hover{opacity:.7}.btn2[_ngcontent-%COMP%]:hover{opacity:1!important}.edit[_ngcontent-%COMP%]{border:none;background-color:#0245a3}.edit[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#fff}.delete[_ngcontent-%COMP%]{border:none;background-color:#fd3a69}.delete[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#fff}.label[_ngcontent-%COMP%]{min-width:100px}.p-disabled[_ngcontent-%COMP%]   .p-dropdown-label[_ngcontent-%COMP%]{background:#bbb!important}.p-dropdown-label[_ngcontent-%COMP%]{border:1px solid #0245a3}"]}),e})();var ce=n("wd/R"),re=n("/JoM"),oe=n("eO1q"),be=n("lVkt");function de(e,t){if(1&e){const e=r.Sb();r.Rb(0,"div",22),r.Rb(1,"span"),r.Fc(2),r.Qb(),r.Rb(3,"a",23),r.Fc(4),r.Qb(),r.Rb(5,"div"),r.Rb(6,"button",24),r.Yb("click",(function(){r.wc(e);const n=t.$implicit;return r.bc().viewURL(n)})),r.Mb(7,"i",25),r.Qb(),r.Rb(8,"button",26),r.Yb("click",(function(){r.wc(e);const n=t.$implicit,i=r.bc();return i.deleteConfirmation(n._id,i.i)})),r.Mb(9,"i",27),r.Qb(),r.Qb(),r.Qb()}if(2&e){const e=t.$implicit;r.zb(2),r.Gc(e.listName),r.zb(1),r.jc("href",e.shortUrl,r.yc),r.zb(1),r.Gc(e.shortUrl)}}function pe(e,t){if(1&e){const e=r.Sb();r.Rb(0,"div",22),r.Rb(1,"span"),r.Fc(2),r.Qb(),r.Rb(3,"div"),r.Rb(4,"button",24),r.Yb("click",(function(){r.wc(e);const n=t.$implicit;return r.bc().downloadList(n)})),r.Fc(5,"Descargar"),r.Qb(),r.Qb(),r.Qb()}if(2&e){const e=t.$implicit;r.zb(2),r.Gc(e.name)}}function ue(e,t){if(1&e&&(r.Rb(0,"div",28),r.Rb(1,"div",29),r.Fc(2),r.cc(3,"uppercase"),r.Qb(),r.Rb(4,"div",30),r.Fc(5),r.Qb(),r.Qb()),2&e){const e=t.$implicit;r.zb(2),r.Gc(r.dc(3,2,e.key)),r.zb(3),r.Gc(e.value)}}function he(e,t){if(1&e&&(r.Rb(0,"div",28),r.Rb(1,"div",29),r.Fc(2),r.cc(3,"uppercase"),r.Qb(),r.Rb(4,"div",30),r.Fc(5),r.Qb(),r.Qb()),2&e){const e=t.$implicit;r.zb(2),r.Gc(r.dc(3,2,e.key)),r.zb(3),r.Gc(e.value)}}const ge=function(){return{"min-heigth":"400px"}},me=[{path:"list",component:(()=>{class e{constructor(e,t,n,i,a,s,c){this.general=e,this.messageService=t,this.authService=n,this.urlService=i,this.confirmationService=a,this.router=s,this.companyService=c,this.subs=new l.a,this.modal=!1,this.startDate=new Date(ce().add(-7,"days").calendar()),this.endDate=new Date,this.currentCompanies=[]}ngOnInit(){this.getUrlsData(),this.getCompanies(),this.getLists()}ngOnDestroy(){this.subs.unsubscribe()}getUrlsData(){this.subs.add(this.urlService.getURLsBYUserID(this.authService.getUserID()).subscribe(e=>{this.urls=Object(c.a)(e.data),this.tmpUrls=Object(c.a)(e.data),this.general.c("getUrlsData",this.tmpUrls),this.filters()}))}getCompanies(){this.subs.add(this.companyService.getCompanies().subscribe(e=>{this.companies=Object(c.a)(e.data),this.companies.map(e=>{this.currentCompanies=[...this.currentCompanies,e]})}))}getLists(){this.subs.add(this.urlService.getLists().subscribe(e=>{this.lists=Object(c.a)(e.data),this.tmpLists=Object(c.a)(e.data),this.filters()}))}filters(){const e=this.urlService.filtersFields(this.tmpLists,this.tmpUrls,this.currentCompanies,this.startDate,this.endDate);this.urls=[...e.urls],this.lists=[...e.lists]}deleteConfirmation(e,t){this.confirmationService.confirm({message:"Seguro que desea eliminar?",accept:()=>{this.deleteURL(e,t)},acceptButtonStyleClass:"bg-color5",acceptLabel:"Si"})}deleteURL(e,t){this.subs.add(this.urlService.delURL(e).subscribe(t=>{this.urls=Object(c.a)([...this.urls.filter(t=>t._id!==e)]),this.messageService.add({severity:"success",summary:"\xc9xito",detail:t.message})},e=>{this.messageService.add({severity:"error",summary:"Error",detail:e.message})}))}editURL(e){}viewURL(e){const t=function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(i=Object.getOwnPropertySymbols(e);a<i.length;a++)t.indexOf(i[a])<0&&Object.prototype.propertyIsEnumerable.call(e,i[a])&&(n[i[a]]=e[i[a]])}return n}(e,["__v","parameters"]);this.currentUrl=Object(c.a)(t),this.currentParameters=e.parameters,this.modal=!0}redirectCreate(){this.router.navigate(["/urls/add"])}downloadList(e){this.subs.add(this.urlService.getURLsBYListID(e._id).subscribe(e=>{this.urlService.downloadList(e.data)}))}back(){}}return e.\u0275fac=function(t){return new(t||e)(r.Lb(o.a),r.Lb(p.f),r.Lb(re.a),r.Lb(d.a),r.Lb(p.a),r.Lb(a.b),r.Lb(u.a))},e.\u0275cmp=r.Fb({type:e,selectors:[["app-list"]],decls:45,vars:18,consts:[[1,"container","pb-5"],[3,"closable"],["header","Confirmaci\xf3n","icon","pi pi-exclamation-triangle"],[1,"col-12","mt-5","row","m-0","justify-content-between","align-items-end"],[1,"row","m-0","col-9","justify-content-end","align-items-end"],[1,"row","m-0","col-12","col-md-3","p-0","flex-column","ml-0","ml-md-2"],[1,"ml-3","mr-3"],["styleClass","flex-1",3,"ngModel","onSelect","ngModelChange"],["defaultLabel","Seleccione una empresa","display","chip","styleClass","flex-1","optionLabel","comercialname",3,"options","ngModel","onChange","onBlur","ngModelChange"],[1,"col-12","mt-5","row","m-0","justify-content-between","align-items-center"],[1,"col-12","mt-5","d-flex","flex-wrap"],[1,"col-12"],[1,"btn2",3,"click"],[1,"pi","pi-plus"],[1,"mt-3"],["filterBy","shortUrl",3,"value"],["pTemplate","item"],[1,"mt-4","border"],["filterBy","name",3,"value"],["styleClass","col-11",3,"header","visible","visibleChange"],["class","row justify-content-center align-items-center",4,"ngFor","ngForOf"],[1,"font-900"],[1,"d-flex","justify-content-between","pl-2","pr-2"],["target","_blank",3,"href"],[1,"view",3,"click"],[1,"pi","pi-eye"],[1,"delete",3,"click"],[1,"pi","pi-trash"],[1,"row","justify-content-center","align-items-center"],[1,"col-6","text-color1","font-500"],[1,"col-6"]],template:function(e,t){1&e&&(r.Mb(0,"app-header"),r.Rb(1,"div",0),r.Mb(2,"p-messages",1),r.Mb(3,"p-confirmDialog",2),r.Rb(4,"div",3),r.Rb(5,"div",4),r.Rb(6,"div",5),r.Rb(7,"span",6),r.Fc(8,"Desde"),r.Qb(),r.Rb(9,"p-calendar",7),r.Yb("onSelect",(function(){return t.filters()}))("ngModelChange",(function(e){return t.startDate=e})),r.Qb(),r.Qb(),r.Rb(10,"div",5),r.Rb(11,"span",6),r.Fc(12,"Hasta "),r.Qb(),r.Rb(13,"p-calendar",7),r.Yb("onSelect",(function(){return t.filters()}))("ngModelChange",(function(e){return t.endDate=e})),r.Qb(),r.Qb(),r.Rb(14,"div",5),r.Rb(15,"span",6),r.Fc(16,"Empresa"),r.Qb(),r.Rb(17,"p-multiSelect",8),r.Yb("onChange",(function(){return t.filters()}))("onBlur",(function(){return t.filters()}))("ngModelChange",(function(e){return t.currentCompanies=e})),r.Qb(),r.Qb(),r.Qb(),r.Qb(),r.Rb(18,"div",9),r.Rb(19,"h5"),r.Fc(20,"URLS"),r.Qb(),r.Qb(),r.Rb(21,"div",10),r.Rb(22,"div",11),r.Rb(23,"div"),r.Rb(24,"button",12),r.Yb("click",(function(){return t.redirectCreate()})),r.Mb(25,"i",13),r.Fc(26," Crear"),r.Qb(),r.Qb(),r.Rb(27,"div",14),r.Rb(28,"p-orderList",15),r.Dc(29,de,10,3,"ng-template",16),r.Qb(),r.Qb(),r.Mb(30,"hr",17),r.Rb(31,"h5"),r.Fc(32,"Listas"),r.Qb(),r.Rb(33,"div",14),r.Rb(34,"p-orderList",18),r.Dc(35,pe,6,1,"ng-template",16),r.Qb(),r.Qb(),r.Qb(),r.Qb(),r.Qb(),r.Rb(36,"p-dialog",19),r.Yb("visibleChange",(function(e){return t.modal=e})),r.Rb(37,"div"),r.Dc(38,ue,6,4,"div",20),r.cc(39,"keyvalue"),r.Mb(40,"hr"),r.Rb(41,"label",21),r.Fc(42,"Par\xe1metros"),r.Qb(),r.Dc(43,he,6,4,"div",20),r.cc(44,"keyvalue"),r.Qb(),r.Qb()),2&e&&(r.zb(2),r.ic("closable",!0),r.zb(7),r.ic("ngModel",t.startDate),r.zb(4),r.ic("ngModel",t.endDate),r.zb(4),r.ic("options",t.companies)("ngModel",t.currentCompanies),r.zb(11),r.ic("value",t.urls),r.zb(6),r.ic("value",t.lists),r.zb(2),r.Bc(r.kc(17,ge)),r.ic("header","URL")("visible",t.modal),r.zb(2),r.ic("ngForOf",r.dc(39,13,t.currentUrl)),r.zb(5),r.ic("ngForOf",r.dc(44,15,t.currentParameters)))},directives:[h.a,E.a,g.a,oe.a,j.e,j.f,be.a,Y.a,p.h,N.a,i.l],pipes:[i.g,i.v],styles:[".content[_ngcontent-%COMP%]{min-height:400px!important}button[_ngcontent-%COMP%]:hover{opacity:.7}.btn2[_ngcontent-%COMP%]:hover{opacity:1!important}.view[_ngcontent-%COMP%]{border:none;background-color:#fecd1a}.view[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#fff}.edit[_ngcontent-%COMP%]{border:none;background-color:#0245a3}.edit[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#fff}.delete[_ngcontent-%COMP%]{border:none;background-color:#fd3a69}.delete[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#fff}"]}),e})()},{path:"add",component:se},{path:"",redirectTo:"list",pathMatch:"full"}];let fe=(()=>{class e{}return e.\u0275mod=r.Jb({type:e}),e.\u0275inj=r.Ib({factory:function(t){return new(t||e)},imports:[[a.c.forChild(me)],a.c]}),e})();var ve=n("IwBl"),Re=n("FMpt");let ye=(()=>{class e{}return e.\u0275mod=r.Jb({type:e}),e.\u0275inj=r.Ib({factory:function(t){return new(t||e)},imports:[[i.c,fe,ve.a,E.b,Re.a,g.b,j.b,Y.b,T,$.b,V.b,N.b,_.b,B.b,oe.b,be.b]]}),e})()}}]);