(window.webpackJsonp=window.webpackJsonp||[]).push([[17],{h2TG:function(e,t,i){"use strict";i.r(t),i.d(t,"PatientModule",(function(){return k}));var n=i("ofXK"),r=i("IwBl"),s=i("/NBs"),a=i("tyNb");class o{constructor(){this._id=null,this.name="",this.email="",this.address="",this.phone="",this.dni="",this._id=null,this.name="",this.email="",this.address="",this.phone="",this.dni=""}}var c=i("33Jv"),l=i("o/65"),b=i("fXoL"),d=i("FQVY"),u=i("x4NB"),m=i("H+bZ");let p=(()=>{class e{constructor(e){this.api=e,this.model="patient"}save(e){return this.api.api({service:e._id?`update-${this.model}/${e._id}`:"save-"+this.model,type:e._id?"patch":"post",data:e})}get(){return this.api.api({service:"get-"+this.model,type:"get",data:null})}delete(e){return this.api.api({service:`delete-${this.model}/${e}`,type:"delete",data:null})}}return e.\u0275fac=function(t){return new(t||e)(b.Yb(m.a))},e.\u0275prov=b.Kb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var h=i("7zfz"),g=i("/JoM"),f=i("aZ8m"),v=i("OEal"),y=i("/RsI"),T=i("3Pt+"),U=i("RTT/"),M=i("Gxio");function w(e,t){if(1&e){const e=b.Vb();b.Ub(0,"li",21),b.Ub(1,"div"),b.Ub(2,"h5",22),b.Ec(3),b.Tb(),b.Tb(),b.Ub(4,"div",23),b.Ub(5,"button",24),b.bc("click",(function(){b.vc(e);const i=t.$implicit;return b.ec().addEdit(i)})),b.Ec(6,"Editar"),b.Tb(),b.Ub(7,"button",25),b.bc("click",(function(i){b.vc(e);const n=t.$implicit;return b.ec().confirm(i,n._id)})),b.Ec(8,"Eliminar"),b.Tb(),b.Tb(),b.Tb()}if(2&e){const e=t.$implicit;b.Ab(3),b.Fc(e.name)}}const E=[{path:"",component:(()=>{class e{constructor(e,t,i,n,r,s){this.general=e,this.userService=t,this.patientService=i,this.confirmationService=n,this.messageService=r,this.authService=s,this.subs=new c.a,this.response=new l.a,this.form=new o,this.displayModal=!1}ngOnInit(){this.validateSession(),this.getData()}ngOnDestroy(){this.subs.unsubscribe()}validateSession(){this.user=this.authService.isLoginUser()}getData(){this.subs.add(this.patientService.get().subscribe(e=>{this.general.c("getData",e),this.items=e.data}))}validateForm(){let e=!1;return this.form.name||(e=!0,this.messageService.add({severity:"error",summary:"Error",detail:"Complete el nombre"})),e}confirm(e,t){this.confirmationService.confirm({target:e.target,message:"\xbfSeg\xfaro que desea eliminar?",icon:"pi pi-exclamation-triangle",acceptLabel:"S\xed",rejectLabel:"No",accept:()=>{this.delete(t)},reject:()=>{}})}addEdit(e=null){this.form=e||new o,this.displayModal=!0}delete(e){this.general.c("Delete",e),e===this.user._id?this.messageService.add({severity:"error",summary:"Error",detail:"No puede eliminar su propio usuario"}):this.subs.add(this.patientService.delete(e).subscribe(e=>{200===e.status?(this.getData(),this.messageService.add({severity:"success",summary:"\xc9xito",detail:"Usuario eliminado"})):this.messageService.add({severity:"error",summary:"Error",detail:e.message})}))}save(){this.validateForm()||this.subs.add(this.patientService.save(this.form).subscribe(e=>{this.messageService.add({severity:"success",summary:"\xc9xito",detail:e.message}),this.getData()},e=>{this.messageService.add({severity:"error",summary:"Error",detail:e.error.message})}))}}return e.\u0275fac=function(t){return new(t||e)(b.Ob(d.a),b.Ob(u.a),b.Ob(p),b.Ob(h.a),b.Ob(h.d),b.Ob(g.a))},e.\u0275cmp=b.Ib({type:e,selectors:[["app-patient"]],decls:41,vars:14,consts:[[1,"row"],[1,"d-none","d-xl-block","menu-container","bg-color1","p-0","m-0","pt-5"],[1,"container-container","flex-1","bg-color5","p-5"],[1,"col-12"],[1,"d-flex","justify-content-between","my-3"],[1,"btn1",3,"click"],[1,"list-group"],["class","list-group-item d-flex justify-content-between align-items-center",4,"ngFor","ngForOf"],["header","",3,"visible","modal","styleClass","baseZIndex","draggable","resizable","autoZIndex","visibleChange"],[1,"row","m-0","justify-content-center"],[1,"row","m-0","p-0","flex-column"],[1,"mt-2"],[1,"w-100"],["type","text","placeholder","Nombre",3,"ngModel","ngModelChange"],["type","email","placeholder","Correo",3,"ngModel","ngModelChange"],["type","text","placeholder","Direcci\xf3n",3,"ngModel","ngModelChange"],["type","text","placeholder","Tel\xe9fono",3,"ngModel","ngModelChange"],["type","text","placeholder","Documento",3,"ngModel","ngModelChange"],[1,"mt-4"],[1,"btn1","w-100",3,"click"],[3,"baseZIndex"],[1,"list-group-item","d-flex","justify-content-between","align-items-center"],[1,"mb-1"],[1,"ml-4"],[1,"btn2","p-0","pt-1","pb-1","pl-4","pr-4","mr-3",3,"click"],[1,"btn1","bg-danger","p-0","pt-1","pb-1","pl-4","pr-4",3,"click"]],template:function(e,t){1&e&&(b.Pb(0,"app-header"),b.Ub(1,"div",0),b.Ub(2,"div",1),b.Pb(3,"app-menu"),b.Tb(),b.Ub(4,"div",2),b.Ub(5,"div",3),b.Ub(6,"div",4),b.Ub(7,"h4"),b.Ec(8," Pacientes "),b.Tb(),b.Ub(9,"button",5),b.bc("click",(function(){return t.addEdit()})),b.Ec(10,"Agregar"),b.Tb(),b.Tb(),b.Ub(11,"ul",6),b.Cc(12,w,9,1,"li",7),b.Tb(),b.Tb(),b.Tb(),b.Tb(),b.Ub(13,"p-dialog",8),b.bc("visibleChange",(function(e){return t.displayModal=e})),b.Ub(14,"div",9),b.Ub(15,"div",10),b.Ub(16,"div",11),b.Ub(17,"label",12),b.Ec(18,"Nombre"),b.Tb(),b.Ub(19,"input",13),b.bc("ngModelChange",(function(e){return t.form.name=e})),b.Tb(),b.Tb(),b.Ub(20,"div",11),b.Ub(21,"label",12),b.Ec(22,"Correo"),b.Tb(),b.Ub(23,"input",14),b.bc("ngModelChange",(function(e){return t.form.email=e})),b.Tb(),b.Tb(),b.Ub(24,"div",11),b.Ub(25,"label",12),b.Ec(26,"Direcci\xf3n"),b.Tb(),b.Ub(27,"input",15),b.bc("ngModelChange",(function(e){return t.form.address=e})),b.Tb(),b.Tb(),b.Ub(28,"div",11),b.Ub(29,"label",12),b.Ec(30,"Tel\xe9fono"),b.Tb(),b.Ub(31,"input",16),b.bc("ngModelChange",(function(e){return t.form.phone=e})),b.Tb(),b.Tb(),b.Ub(32,"div",11),b.Ub(33,"label",12),b.Ec(34,"Nro Documento"),b.Tb(),b.Ub(35,"input",17),b.bc("ngModelChange",(function(e){return t.form.dni=e})),b.Tb(),b.Tb(),b.Ub(36,"div",18),b.Ub(37,"button",19),b.bc("click",(function(){return t.save()})),b.Ec(38,"Guardar"),b.Tb(),b.Tb(),b.Tb(),b.Tb(),b.Tb(),b.Pb(39,"p-confirmPopup",20),b.Pb(40,"p-toast")),2&e&&(b.Ab(12),b.kc("ngForOf",t.items),b.Ab(1),b.kc("visible",t.displayModal)("modal",!0)("styleClass","modalAddEdit")("baseZIndex",1e4)("draggable",!1)("resizable",!1)("autoZIndex",!1),b.Ab(6),b.kc("ngModel",t.form.name),b.Ab(4),b.kc("ngModel",t.form.email),b.Ab(4),b.kc("ngModel",t.form.address),b.Ab(4),b.kc("ngModel",t.form.phone),b.Ab(4),b.kc("ngModel",t.form.dni),b.Ab(4),b.kc("baseZIndex",10001))},directives:[f.a,v.a,n.l,y.a,T.b,T.e,T.f,U.a,M.a],styles:[""]}),e})()}];let x=(()=>{class e{}return e.\u0275mod=b.Mb({type:e}),e.\u0275inj=b.Lb({factory:function(t){return new(t||e)},imports:[[a.c.forChild(E)],a.c]}),e})(),k=(()=>{class e{}return e.\u0275mod=b.Mb({type:e}),e.\u0275inj=b.Lb({factory:function(t){return new(t||e)},imports:[[n.c,x,r.a,s.a,y.b,T.c,U.b,M.b]]}),e})()}}]);