(window.webpackJsonp=window.webpackJsonp||[]).push([[15],{RvEh:function(e,t,i){"use strict";i.r(t),i.d(t,"EquipmentModule",(function(){return k}));var s=i("ofXK"),r=i("IwBl"),a=i("/NBs"),n=i("tyNb");class c{constructor(){this._id=null,this.name="",this._id=null,this.name=""}}var o=i("33Jv"),b=i("o/65"),l=i("fXoL"),d=i("FQVY"),u=i("x4NB"),m=i("H+bZ");let p=(()=>{class e{constructor(e){this.api=e,this.model="equipment"}save(e){return this.api.api({service:e._id?`update-${this.model}/${e._id}`:"save-"+this.model,type:e._id?"patch":"post",data:e})}get(){return this.api.api({service:"get-"+this.model,type:"get",data:null})}delete(e){return this.api.api({service:`delete-${this.model}/${e}`,type:"delete",data:null})}}return e.\u0275fac=function(t){return new(t||e)(l.Yb(m.a))},e.\u0275prov=l.Kb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var h=i("7zfz"),v=i("/JoM"),g=i("aZ8m"),f=i("OEal"),y=i("/RsI"),T=i("3Pt+"),U=i("RTT/"),w=i("Gxio");function E(e,t){if(1&e){const e=l.Vb();l.Ub(0,"li",17),l.Ub(1,"div"),l.Ub(2,"h5",18),l.Ec(3),l.Tb(),l.Tb(),l.Ub(4,"div",19),l.Ub(5,"button",20),l.bc("click",(function(){l.vc(e);const i=t.$implicit;return l.ec().addEdit(i)})),l.Ec(6,"Editar"),l.Tb(),l.Ub(7,"button",21),l.bc("click",(function(i){l.vc(e);const s=t.$implicit;return l.ec().confirm(i,s._id)})),l.Ec(8,"Eliminar"),l.Tb(),l.Tb(),l.Tb()}if(2&e){const e=t.$implicit;l.Ab(3),l.Fc(e.name)}}const S=[{path:"",component:(()=>{class e{constructor(e,t,i,s,r,a){this.general=e,this.userService=t,this.equipmentService=i,this.confirmationService=s,this.messageService=r,this.authService=a,this.subs=new o.a,this.response=new b.a,this.form=new c,this.displayModal=!1}ngOnInit(){this.validateSession(),this.getData()}ngOnDestroy(){this.subs.unsubscribe()}validateSession(){this.user=this.authService.isLoginUser()}getData(){this.subs.add(this.equipmentService.get().subscribe(e=>{this.general.c("Get",e),this.items=[...e.data]}))}validateForm(){let e=!1;return this.form.name||(e=!0,this.messageService.add({severity:"error",summary:"Error",detail:"Complete el nombre"})),e}confirm(e,t){this.confirmationService.confirm({target:e.target,message:"\xbfSeg\xfaro que desea eliminar?",icon:"pi pi-exclamation-triangle",acceptLabel:"S\xed",rejectLabel:"No",accept:()=>{this.delete(t)},reject:()=>{}})}addEdit(e=null){this.form=e||new c,this.displayModal=!0}delete(e){this.general.c("Delete",e),e===this.user._id?this.messageService.add({severity:"error",summary:"Error",detail:"No puede eliminar su propio usuario"}):this.subs.add(this.equipmentService.delete(e).subscribe(e=>{200===e.status?(this.getData(),this.messageService.add({severity:"success",summary:"\xc9xito",detail:"Usuario eliminado"})):this.messageService.add({severity:"error",summary:"Error",detail:e.message})}))}save(){this.validateForm()||this.subs.add(this.equipmentService.save(this.form).subscribe(e=>{this.messageService.add({severity:"success",summary:"\xc9xito",detail:e.message}),this.getData()},e=>{this.messageService.add({severity:"error",summary:"Error",detail:e.error.message})}))}}return e.\u0275fac=function(t){return new(t||e)(l.Ob(d.a),l.Ob(u.a),l.Ob(p),l.Ob(h.a),l.Ob(h.d),l.Ob(v.a))},e.\u0275cmp=l.Ib({type:e,selectors:[["app-equipment"]],decls:25,vars:10,consts:[[1,"row"],[1,"d-none","d-xl-block","menu-container","bg-color1","p-0","m-0","pt-5"],[1,"container-container","flex-1","bg-color5","p-5"],[1,"col-12"],[1,"d-flex","justify-content-between","my-3"],[1,"btn1",3,"click"],[1,"list-group"],["class","list-group-item d-flex justify-content-between align-items-center",4,"ngFor","ngForOf"],["header","",3,"visible","modal","styleClass","baseZIndex","draggable","resizable","autoZIndex","visibleChange"],[1,"row","m-0","justify-content-center"],[1,"row","m-0","p-0","flex-column"],[1,"mt-2"],[1,"w-100"],["type","text","placeholder","Nombre",3,"ngModel","ngModelChange"],[1,"mt-4"],[1,"btn1","w-100",3,"click"],[3,"baseZIndex"],[1,"list-group-item","d-flex","justify-content-between","align-items-center"],[1,"mb-1"],[1,"ml-4"],[1,"btn2","p-0","pt-1","pb-1","pl-4","pr-4","mr-3",3,"click"],[1,"btn1","bg-danger","p-0","pt-1","pb-1","pl-4","pr-4",3,"click"]],template:function(e,t){1&e&&(l.Pb(0,"app-header"),l.Ub(1,"div",0),l.Ub(2,"div",1),l.Pb(3,"app-menu"),l.Tb(),l.Ub(4,"div",2),l.Ub(5,"div",3),l.Ub(6,"div",4),l.Ub(7,"h4"),l.Ec(8," Equipamiento "),l.Tb(),l.Ub(9,"button",5),l.bc("click",(function(){return t.addEdit()})),l.Ec(10,"Agregar"),l.Tb(),l.Tb(),l.Ub(11,"ul",6),l.Cc(12,E,9,1,"li",7),l.Tb(),l.Tb(),l.Tb(),l.Tb(),l.Ub(13,"p-dialog",8),l.bc("visibleChange",(function(e){return t.displayModal=e})),l.Ub(14,"div",9),l.Ub(15,"div",10),l.Ub(16,"div",11),l.Ub(17,"label",12),l.Ec(18,"Nombre"),l.Tb(),l.Ub(19,"input",13),l.bc("ngModelChange",(function(e){return t.form.name=e})),l.Tb(),l.Tb(),l.Ub(20,"div",14),l.Ub(21,"button",15),l.bc("click",(function(){return t.save()})),l.Ec(22,"Guardar"),l.Tb(),l.Tb(),l.Tb(),l.Tb(),l.Tb(),l.Pb(23,"p-confirmPopup",16),l.Pb(24,"p-toast")),2&e&&(l.Ab(12),l.kc("ngForOf",t.items),l.Ab(1),l.kc("visible",t.displayModal)("modal",!0)("styleClass","modalAddEdit")("baseZIndex",1e4)("draggable",!1)("resizable",!1)("autoZIndex",!1),l.Ab(6),l.kc("ngModel",t.form.name),l.Ab(4),l.kc("baseZIndex",10001))},directives:[g.a,f.a,s.l,y.a,T.b,T.e,T.f,U.a,w.a],styles:[""]}),e})()}];let x=(()=>{class e{}return e.\u0275mod=l.Mb({type:e}),e.\u0275inj=l.Lb({factory:function(t){return new(t||e)},imports:[[n.c.forChild(S)],n.c]}),e})(),k=(()=>{class e{}return e.\u0275mod=l.Mb({type:e}),e.\u0275inj=l.Lb({factory:function(t){return new(t||e)},imports:[[s.c,x,r.a,a.a,y.b,T.c,U.b,w.b]]}),e})()}}]);