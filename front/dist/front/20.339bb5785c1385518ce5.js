(window.webpackJsonp=window.webpackJsonp||[]).push([[20],{"9N29":function(e,r,s){"use strict";s.r(r),s.d(r,"UserModule",(function(){return F}));var i=s("ofXK"),t=s("tyNb");class o{constructor(){this._id=null,this.name="",this.email="",this.password="",this.role="",this._id=null,this.name="",this.email="",this.password="",this.role=""}}var a=s("33Jv"),n=s("o/65"),c=s("fXoL"),l=s("FQVY"),b=s("x4NB"),d=s("7zfz"),u=s("/JoM"),m=s("aZ8m"),h=s("OEal"),p=s("/RsI"),g=s("3Pt+"),v=s("RTT/"),U=s("Gxio");function f(e,r){if(1&e){const e=c.Vb();c.Ub(0,"li",25),c.Ub(1,"div"),c.Ub(2,"h5",26),c.Ec(3),c.Tb(),c.Ub(4,"p",27),c.Ec(5),c.Tb(),c.Ub(6,"span",28),c.Ec(7),c.Tb(),c.Tb(),c.Ub(8,"div",29),c.Ub(9,"button",30),c.bc("click",(function(){c.vc(e);const s=r.$implicit;return c.ec().addEdit(s)})),c.Ec(10,"Editar"),c.Tb(),c.Ub(11,"button",31),c.bc("click",(function(s){c.vc(e);const i=r.$implicit;return c.ec().confirm(s,i._id)})),c.Ec(12,"Eliminar"),c.Tb(),c.Tb(),c.Tb()}if(2&e){const e=r.$implicit;c.Ab(3),c.Fc(e.name),c.Ab(2),c.Fc(e.email),c.Ab(2),c.Fc(e.role)}}const y=[{path:"",component:(()=>{class e{constructor(e,r,s,i,t){this.general=e,this.userService=r,this.confirmationService=s,this.messageService=i,this.authService=t,this.subs=new a.a,this.response=new n.a,this.userForm=new o,this.displayModal=!1}ngOnInit(){this.validateSession(),this.getUsers()}ngOnDestroy(){this.subs.unsubscribe()}validateSession(){this.user=this.authService.isLoginUser()}getUsers(){this.subs.add(this.userService.getUsers().subscribe(e=>{this.general.c("GetUsers",e),this.users=[...e.data]}))}validateForm(){let e=!1;return this.userForm.name||(e=!0,this.messageService.add({severity:"error",summary:"Error",detail:"Complete el nombre"})),this.userForm.email&&this.general.validateEmail(this.userForm.email)||(e=!0,this.messageService.add({severity:"error",summary:"Error",detail:"Verifique el correo"})),(!this.userForm.password||this.userForm.password.length<8)&&(e=!0,this.messageService.add({severity:"error",summary:"Error",detail:"Revise la contrase\xf1a, debe tener como m\xednimo 8 d\xedgitos"})),this.userForm.role||(e=!0,this.messageService.add({severity:"error",summary:"Error",detail:"Seleccione un rol"})),e}confirm(e,r){this.confirmationService.confirm({target:e.target,message:"\xbfSeg\xfaro que desea eliminar?",icon:"pi pi-exclamation-triangle",acceptLabel:"S\xed",rejectLabel:"No",accept:()=>{this.deleteUser(r)},reject:()=>{}})}addEdit(e=null){this.userForm=e||new o,this.displayModal=!0}deleteUser(e){this.general.c("deleteUser",e),e===this.user._id?this.messageService.add({severity:"error",summary:"Error",detail:"No puede eliminar su propio usuario"}):this.subs.add(this.userService.deleteUser(e).subscribe(e=>{200===e.status?(this.getUsers(),this.messageService.add({severity:"success",summary:"\xc9xito",detail:"Usuario eliminado"})):this.messageService.add({severity:"error",summary:"Error",detail:e.message})}))}save(){this.validateForm()||this.subs.add(this.userService.saveUser(this.userForm).subscribe(e=>{this.messageService.add({severity:"success",summary:"\xc9xito",detail:e.message}),this.getUsers()},e=>{this.messageService.add({severity:"error",summary:"Error",detail:e.error.message})}))}}return e.\u0275fac=function(r){return new(r||e)(c.Ob(l.a),c.Ob(b.a),c.Ob(d.a),c.Ob(d.d),c.Ob(u.a))},e.\u0275cmp=c.Ib({type:e,selectors:[["app-user"]],decls:47,vars:13,consts:[[1,"row"],[1,"d-none","d-xl-block","menu-container","bg-color1","p-0","m-0","pt-5"],[1,"container-container","flex-1","bg-color5","p-5"],[1,"col-12"],[1,"d-flex","justify-content-between","my-3"],[1,"btn1",3,"click"],[1,"list-group"],["class","list-group-item d-flex justify-content-between align-items-center",4,"ngFor","ngForOf"],["header","",3,"visible","modal","styleClass","baseZIndex","draggable","resizable","autoZIndex","visibleChange"],[1,"row","m-0","justify-content-center"],[1,"row","m-0","p-0","flex-column"],[1,"mt-2"],[1,"w-100"],["type","text","placeholder","Nombre",3,"ngModel","ngModelChange"],["type","email","placeholder","Correo",3,"ngModel","ngModelChange"],["type","password","placeholder","Contrase\xf1a",3,"ngModel","ngModelChange"],[3,"ngModel","ngModelChange"],["value",""],["value","Administrador"],["value","Ejecutivo"],["value","Paciente"],["value","Doctor"],[1,"mt-4"],[1,"btn1","w-100",3,"click"],[3,"baseZIndex"],[1,"list-group-item","d-flex","justify-content-between","align-items-center"],[1,"mb-1"],[1,"d-block"],[1,"text-color1"],[1,"ml-4"],[1,"btn2","p-0","pt-1","pb-1","pl-4","pr-4","mr-3",3,"click"],[1,"btn1","bg-danger","p-0","pt-1","pb-1","pl-4","pr-4",3,"click"]],template:function(e,r){1&e&&(c.Pb(0,"app-header"),c.Ub(1,"div",0),c.Ub(2,"div",1),c.Pb(3,"app-menu"),c.Tb(),c.Ub(4,"div",2),c.Ub(5,"div",3),c.Ub(6,"div",4),c.Ub(7,"h4"),c.Ec(8," Usuarios "),c.Tb(),c.Ub(9,"button",5),c.bc("click",(function(){return r.addEdit()})),c.Ec(10,"Agregar Usuario"),c.Tb(),c.Tb(),c.Ub(11,"ul",6),c.Cc(12,f,13,3,"li",7),c.Tb(),c.Tb(),c.Tb(),c.Ub(13,"p-dialog",8),c.bc("visibleChange",(function(e){return r.displayModal=e})),c.Ub(14,"div",9),c.Ub(15,"div",10),c.Ub(16,"div",11),c.Ub(17,"label",12),c.Ec(18,"Nombre"),c.Tb(),c.Ub(19,"input",13),c.bc("ngModelChange",(function(e){return r.userForm.name=e})),c.Tb(),c.Tb(),c.Ub(20,"div",11),c.Ub(21,"label",12),c.Ec(22,"Correo"),c.Tb(),c.Ub(23,"input",14),c.bc("ngModelChange",(function(e){return r.userForm.email=e})),c.Tb(),c.Tb(),c.Ub(24,"div",11),c.Ub(25,"label",12),c.Ec(26,"Contrase\xf1a"),c.Tb(),c.Ub(27,"input",15),c.bc("ngModelChange",(function(e){return r.userForm.password=e})),c.Tb(),c.Tb(),c.Ub(28,"div",11),c.Ub(29,"label",12),c.Ec(30,"Rol"),c.Tb(),c.Ub(31,"select",16),c.bc("ngModelChange",(function(e){return r.userForm.role=e})),c.Ub(32,"option",17),c.Ec(33,"Seleccione un rol"),c.Tb(),c.Ub(34,"option",18),c.Ec(35,"Administrador"),c.Tb(),c.Ub(36,"option",19),c.Ec(37,"Ejecutivo"),c.Tb(),c.Ub(38,"option",20),c.Ec(39,"Paciente"),c.Tb(),c.Ub(40,"option",21),c.Ec(41,"Doctor"),c.Tb(),c.Tb(),c.Tb(),c.Ub(42,"div",22),c.Ub(43,"button",23),c.bc("click",(function(){return r.save()})),c.Ec(44,"Guardar"),c.Tb(),c.Tb(),c.Tb(),c.Tb(),c.Tb(),c.Pb(45,"p-confirmPopup",24),c.Pb(46,"p-toast"),c.Tb()),2&e&&(c.Ab(12),c.kc("ngForOf",r.users),c.Ab(1),c.kc("visible",r.displayModal)("modal",!0)("styleClass","modalAddEdit")("baseZIndex",1e4)("draggable",!1)("resizable",!1)("autoZIndex",!1),c.Ab(6),c.kc("ngModel",r.userForm.name),c.Ab(4),c.kc("ngModel",r.userForm.email),c.Ab(4),c.kc("ngModel",r.userForm.password),c.Ab(4),c.kc("ngModel",r.userForm.role),c.Ab(14),c.kc("baseZIndex",10001))},directives:[m.a,h.a,i.l,p.a,g.b,g.e,g.f,g.i,g.g,g.j,v.a,U.a],styles:[""]}),e})()}];let T=(()=>{class e{}return e.\u0275mod=c.Mb({type:e}),e.\u0275inj=c.Lb({factory:function(r){return new(r||e)},imports:[[t.c.forChild(y)],t.c]}),e})();var E=s("IwBl"),w=s("/NBs");let F=(()=>{class e{}return e.\u0275mod=c.Mb({type:e}),e.\u0275inj=c.Lb({factory:function(r){return new(r||e)},imports:[[i.c,T,E.a,w.a,p.b,g.c,v.b,U.b]]}),e})()}}]);