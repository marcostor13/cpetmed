(window.webpackJsonp=window.webpackJsonp||[]).push([[10],{Mvf5:function(e,t,i){"use strict";i.r(t),i.d(t,"AppointmentModule",(function(){return $}));var n=i("ofXK"),a=i("IwBl"),r=i("/NBs"),o=i("tyNb");class s{constructor(){this._id=null}}var c=i("33Jv"),d=i("o/65"),l=i("XIp8"),b=i("fXoL"),p=i("FQVY"),u=i("x4NB"),h=i("H+bZ");let m=(()=>{class e{constructor(e){this.api=e,this.model="appointment"}save(e){return this.api.api({service:e._id?`update-${this.model}/${e._id}`:"save-"+this.model,type:e._id?"patch":"post",data:e})}updateAppointment(e){return this.api.api({service:`update-${this.model}/${e._id}`,type:"patch",data:e})}updateAppointmentData(e){return this.api.api({service:`update-${this.model}-data`,type:"post",data:e})}get(){return this.api.api({service:"get-"+this.model,type:"get",data:null})}delete(e){return this.api.api({service:"delete-"+this.model,type:"post",data:e})}}return e.\u0275fac=function(t){return new(t||e)(b.Yb(h.a))},e.\u0275prov=b.Kb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var g=i("7zfz"),v=i("/JoM"),f=i("D/9S"),U=i("FfEP"),y=i("FU2O"),T=i("5u0j"),A=i("aZ8m"),E=i("OEal"),M=i("/RsI"),S=i("3Pt+"),C=i("RTT/"),D=i("Gxio");function k(e,t){if(1&e){const e=b.Vb();b.Ub(0,"li",27),b.Ub(1,"div",28),b.Ub(2,"div",0),b.Ub(3,"span",29),b.Ec(4,"Doctor:"),b.Tb(),b.Ub(5,"span",30),b.Ec(6),b.Tb(),b.Tb(),b.Ub(7,"div",0),b.Ub(8,"span",29),b.Ec(9,"Paciente:"),b.Tb(),b.Ub(10,"span",30),b.Ec(11),b.Tb(),b.Tb(),b.Ub(12,"div",0),b.Ub(13,"span",29),b.Ec(14,"Especialidad:"),b.Tb(),b.Ub(15,"span",30),b.Ec(16),b.Tb(),b.Tb(),b.Ub(17,"div",0),b.Ub(18,"span",29),b.Ec(19,"Fecha y Hora:"),b.Tb(),b.Ub(20,"span",30),b.Ec(21),b.Tb(),b.Tb(),b.Tb(),b.Ub(22,"div",31),b.Ub(23,"button",32),b.bc("click",(function(){b.vc(e);const i=t.$implicit;return b.ec().editPatientData(i)})),b.Ec(24,"Datos del paciente"),b.Tb(),b.Ub(25,"button",32),b.bc("click",(function(){b.vc(e);const i=t.$implicit;return b.ec().editAppointmentData(i)})),b.Ec(26,"Datos de la cita"),b.Tb(),b.Ub(27,"button",33),b.bc("click",(function(i){b.vc(e);const n=t.$implicit;return b.ec().confirm(i,n)})),b.Ec(28,"Eliminar"),b.Tb(),b.Tb(),b.Tb()}if(2&e){const e=t.$implicit;b.Ab(6),b.Fc(e.doctor),b.Ab(5),b.Hc("",e.dateUser.firstname," ",e.dateUser.lastname,""),b.Ab(5),b.Fc(e.specialty),b.Ab(5),b.Hc("",e.date," - ",e.hour,"")}}function x(e,t){if(1&e&&(b.Ub(0,"option",34),b.Ec(1),b.Tb()),2&e){const e=t.$implicit;b.lc("value",e._id),b.Ab(1),b.Fc(e.name)}}function F(e,t){if(1&e&&(b.Ub(0,"option",34),b.Ec(1),b.Tb()),2&e){const e=t.$implicit;b.lc("value",e._id),b.Ab(1),b.Fc(e.name)}}function L(e,t){if(1&e&&(b.Ub(0,"option",34),b.Ec(1),b.Tb()),2&e){const e=t.$implicit;b.lc("value",e.date),b.Ab(1),b.Gc("",e.date," ")}}function O(e,t){if(1&e&&(b.Ub(0,"option",34),b.Ec(1),b.Tb()),2&e){const e=b.ec().$implicit;b.lc("value",e.hour),b.Ab(1),b.Fc(e.hour)}}function w(e,t){if(1&e&&(b.Sb(0),b.Cc(1,O,2,2,"option",35),b.Rb()),2&e){const e=t.$implicit;b.Ab(1),b.kc("ngIf",!e.inactive)}}const I=[{path:"",component:(()=>{class e{constructor(e,t,i,n,a,r,o,l,b,p){this.general=e,this.userService=t,this.appointmentService=i,this.confirmationService=n,this.messageService=a,this.authService=r,this.specialtyService=o,this.doctorService=l,this.calendarService=b,this.homeService=p,this.subs=new c.a,this.response=new d.a,this.form=new s,this.displayModalEditPatient=!1,this.displayModalEditAppointment=!1,this.displayModalAppointment=!1,this.specialtyid="",this.doctorid="",this.date="",this.hour=""}ngOnInit(){this.validateSession(),this.getData(),this.general.isLoad("0")}ngOnDestroy(){this.subs.unsubscribe()}validateSession(){this.user=this.authService.isLoginUser()}getData(){this.subs.add(this.appointmentService.get().subscribe(e=>{this.general.c("Get",e),this.items=[...e.data]}))}confirm(e,t){this.confirmationService.confirm({target:e.target,message:"\xbfSeg\xfaro que desea eliminar?",icon:"pi pi-exclamation-triangle",acceptLabel:"S\xed",rejectLabel:"No",accept:()=>{this.delete(t)},reject:()=>{}})}editPatientData(e){this.currentAppointment=e,this.displayModalEditPatient=!0}editAppointmentData(e){this.specialtyid="",this.doctorid="",this.date="",this.hour="",this.getSpecialties(),this.currentAppointment=e,this.displayModalEditAppointment=!0}delete(e){this.general.isLoad("1"),this.subs.add(this.appointmentService.delete(e).subscribe(e=>{this.general.isLoad("0"),this.getData(),this.messageService.add({severity:"success",summary:"\xc9xito",detail:"Cita eliminada"})},e=>{this.general.isLoad("0"),this.messageService.add({severity:"error",summary:"Error",detail:e.error.message})}))}save(){this.general.isLoad("1"),this.subs.add(this.appointmentService.updateAppointment(this.currentAppointment).subscribe(e=>{this.messageService.add({severity:"success",summary:"\xc9xito",detail:e.message}),this.getData()},e=>{this.general.isLoad("0"),this.messageService.add({severity:"error",summary:"Error",detail:e.error.message})}))}getNameById(e,t){let i=!1;return t.map(t=>{t._id===e&&(i=t.name)}),i}updateAppointmentData(){if(this.specialtyid&&this.doctorid&&this.date&&this.hour){const e=Object(l.a)(this.currentAppointment);e.specialtyid=this.specialtyid,e.specialty=this.getNameById(this.specialtyid,this.specialties),e.doctorid=this.doctorid,e.doctor=this.getNameById(this.doctorid,this.doctors),e.date=this.date,e.hour=this.hour;const t={currentAppointment:this.currentAppointment,newAppointmentData:e};this.general.isLoad("1"),this.subs.add(this.appointmentService.updateAppointmentData(t).subscribe(e=>{this.general.isLoad("0"),this.messageService.add({severity:"success",summary:"\xc9xito",detail:e.message}),this.getData()},e=>{this.general.isLoad("0"),this.messageService.add({severity:"error",summary:"Error",detail:e.error.message})}))}else this.messageService.add({severity:"error",summary:"Error",detail:"Debe completar todos los datos"})}getSpecialties(){this.general.isLoad("1"),this.subs.add(this.specialtyService.get().subscribe(e=>{this.specialties=e.data,this.general.isLoad("0")},e=>{this.general.isLoad("0"),this.messageService.add({severity:"error",summary:"Error",detail:e.error.message})}))}getDoctorsBySpecialties(){""!==this.specialtyid&&(this.general.isLoad("1"),this.subs.add(this.doctorService.getDoctorBySpecialty(this.specialtyid).subscribe(e=>{var t;this.general.c("getDoctorsBySpecialties",e.data),0===(null===(t=e.data)||void 0===t?void 0:t.length)&&this.messageService.add({severity:"error",summary:"Mensaje",detail:"No hay doctores disponibles para esta especialidad"}),this.doctors=e.data,this.general.isLoad("0")},e=>{this.general.isLoad("0"),this.messageService.add({severity:"error",summary:"Error",detail:e.error.message})})))}getDoctorCalendar(){""!==this.doctorid&&(this.general.isLoad("1"),this.subs.add(this.calendarService.getDataCalendarDoctor(this.doctorid).subscribe(e=>{var t;this.general.c("getDoctorCalendar",e),0===(null===(t=e.data)||void 0===t?void 0:t.length)&&this.messageService.add({severity:"error",summary:"Mensaje",detail:"Error al traer la data del doctor, comun\xedquese con la cl\xednica"}),this.dataCalendarDoctor=this.calendarService.formatArrayCalendar(e.data),this.dataCalendarDoctor2=e.data,this.general.isLoad("0")},e=>{this.general.isLoad("0"),this.messageService.add({severity:"error",summary:"Error",detail:e.error.message})})))}getHours(){this.hours=this.homeService.getHours(this.date,this.dataCalendarDoctor2),this.general.c("HoURS",this.hours)}}return e.\u0275fac=function(t){return new(t||e)(b.Ob(p.a),b.Ob(u.a),b.Ob(m),b.Ob(g.a),b.Ob(g.d),b.Ob(v.a),b.Ob(f.a),b.Ob(U.a),b.Ob(y.a),b.Ob(T.a))},e.\u0275cmp=b.Ib({type:e,selectors:[["app-appointment"]],decls:77,vars:30,consts:[[1,"row"],[1,"d-none","d-xl-block","menu-container","bg-color1","p-0","m-0","pt-5"],[1,"container-container","flex-1","bg-color5","p-5"],[1,"col-12"],[1,"d-flex","justify-content-between","my-3"],[1,"list-group"],["class","cursor list-group-item d-flex justify-content-between align-items-center",4,"ngFor","ngForOf"],["header","",3,"visible","modal","styleClass","baseZIndex","draggable","resizable","autoZIndex","visibleChange"],[1,"row","m-0","justify-content-center"],[1,"row","m-0","p-0","flex-column"],[1,"mt-2"],[1,"w-100"],["type","text","placeholder","Nombre",3,"ngModel","ngModelChange"],["type","text","placeholder","Apellido",3,"ngModel","ngModelChange"],["type","text","placeholder","Documento",3,"ngModel","ngModelChange"],["type","text","placeholder","Fecha de nacimiento",3,"ngModel","ngModelChange"],["type","text","placeholder","Correo",3,"ngModel","ngModelChange"],["type","text","placeholder","Tel\xe9fono",3,"ngModel","ngModelChange"],[1,"mt-4"],[1,"btn1","w-100",3,"click"],[1,"form-group"],[3,"ngModel","change","ngModelChange"],["value",""],[3,"value",4,"ngFor","ngForOf"],[3,"ngModel","ngModelChange"],[4,"ngFor","ngForOf"],[3,"baseZIndex"],[1,"cursor","list-group-item","d-flex","justify-content-between","align-items-center"],[1,"pl-3"],[1,"font-500"],[1,"ml-2"],[1,"ml-4"],[1,"btn2","p-0","pt-1","pb-1","pl-4","pr-4","mr-3",3,"click"],[1,"btn1","bg-danger","p-0","pt-1","pb-1","pl-4","pr-4",3,"click"],[3,"value"],[3,"value",4,"ngIf"]],template:function(e,t){1&e&&(b.Pb(0,"app-header"),b.Ub(1,"div",0),b.Ub(2,"div",1),b.Pb(3,"app-menu"),b.Tb(),b.Ub(4,"div",2),b.Ub(5,"div",3),b.Ub(6,"div",4),b.Ub(7,"h4"),b.Ec(8," Citas "),b.Tb(),b.Tb(),b.Ub(9,"ul",5),b.Cc(10,k,29,6,"li",6),b.Tb(),b.Tb(),b.Tb(),b.Tb(),b.Ub(11,"p-dialog",7),b.bc("visibleChange",(function(e){return t.displayModalEditPatient=e})),b.Ub(12,"div",8),b.Ub(13,"div",9),b.Ub(14,"div",10),b.Ub(15,"label",11),b.Ec(16,"Fecha"),b.Tb(),b.Ub(17,"input",12),b.bc("ngModelChange",(function(e){return(null==t.currentAppointment?null:t.currentAppointment.dateUser).firstname=e})),b.Tb(),b.Tb(),b.Ub(18,"div",10),b.Ub(19,"label",11),b.Ec(20,"Hora"),b.Tb(),b.Ub(21,"input",13),b.bc("ngModelChange",(function(e){return(null==t.currentAppointment?null:t.currentAppointment.dateUser).lastname=e})),b.Tb(),b.Tb(),b.Ub(22,"div",10),b.Ub(23,"label",11),b.Ec(24,"Documento"),b.Tb(),b.Ub(25,"input",14),b.bc("ngModelChange",(function(e){return(null==t.currentAppointment?null:t.currentAppointment.dateUser).dni=e})),b.Tb(),b.Tb(),b.Ub(26,"div",10),b.Ub(27,"label",11),b.Ec(28,"Fecha de nacimiento"),b.Tb(),b.Ub(29,"input",15),b.bc("ngModelChange",(function(e){return(null==t.currentAppointment?null:t.currentAppointment.dateUser).dateofbirth=e})),b.Tb(),b.Tb(),b.Ub(30,"div",10),b.Ub(31,"label",11),b.Ec(32,"Correo"),b.Tb(),b.Ub(33,"input",16),b.bc("ngModelChange",(function(e){return(null==t.currentAppointment?null:t.currentAppointment.dateUser).email=e})),b.Tb(),b.Tb(),b.Ub(34,"div",10),b.Ub(35,"label",11),b.Ec(36,"Tel\xe9fono"),b.Tb(),b.Ub(37,"input",17),b.bc("ngModelChange",(function(e){return(null==t.currentAppointment?null:t.currentAppointment.dateUser).phone=e})),b.Tb(),b.Tb(),b.Ub(38,"div",18),b.Ub(39,"button",19),b.bc("click",(function(){return t.save()})),b.Ec(40,"Guardar"),b.Tb(),b.Tb(),b.Tb(),b.Tb(),b.Tb(),b.Ub(41,"p-dialog",7),b.bc("visibleChange",(function(e){return t.displayModalEditAppointment=e})),b.Ub(42,"div",8),b.Ub(43,"div",9),b.Ub(44,"div",20),b.Ub(45,"label"),b.Ec(46,"Especialidad"),b.Tb(),b.Ub(47,"select",21),b.bc("change",(function(){return t.getDoctorsBySpecialties()}))("ngModelChange",(function(e){return t.specialtyid=e})),b.Ub(48,"option",22),b.Ec(49,"Seleccione una especialidad"),b.Tb(),b.Cc(50,x,2,2,"option",23),b.Tb(),b.Tb(),b.Ub(51,"div",20),b.Ub(52,"label"),b.Ec(53,"Doctor"),b.Tb(),b.Ub(54,"select",21),b.bc("change",(function(){return t.getDoctorCalendar()}))("ngModelChange",(function(e){return t.doctorid=e})),b.Ub(55,"option",22),b.Ec(56,"Seleccione un doctor"),b.Tb(),b.Cc(57,F,2,2,"option",23),b.Tb(),b.Tb(),b.Ub(58,"div",20),b.Ub(59,"label"),b.Ec(60,"Fecha"),b.Tb(),b.Ub(61,"select",21),b.bc("change",(function(){return t.getHours()}))("ngModelChange",(function(e){return t.date=e})),b.Ub(62,"option",22),b.Ec(63,"Seleccione una fecha"),b.Tb(),b.Cc(64,L,2,2,"option",23),b.Tb(),b.Tb(),b.Ub(65,"div",20),b.Ub(66,"label"),b.Ec(67,"Hora"),b.Tb(),b.Ub(68,"select",24),b.bc("ngModelChange",(function(e){return t.hour=e})),b.Ub(69,"option",22),b.Ec(70,"Seleccione una hora"),b.Tb(),b.Cc(71,w,2,1,"ng-container",25),b.Tb(),b.Tb(),b.Ub(72,"div",18),b.Ub(73,"button",19),b.bc("click",(function(){return t.updateAppointmentData()})),b.Ec(74,"Guardar"),b.Tb(),b.Tb(),b.Tb(),b.Tb(),b.Tb(),b.Pb(75,"p-confirmPopup",26),b.Pb(76,"p-toast")),2&e&&(b.Ab(10),b.kc("ngForOf",t.items),b.Ab(1),b.kc("visible",t.displayModalEditPatient)("modal",!0)("styleClass","modalAddEdit")("baseZIndex",1e4)("draggable",!1)("resizable",!1)("autoZIndex",!1),b.Ab(6),b.kc("ngModel",null==t.currentAppointment?null:t.currentAppointment.dateUser.firstname),b.Ab(4),b.kc("ngModel",null==t.currentAppointment?null:t.currentAppointment.dateUser.lastname),b.Ab(4),b.kc("ngModel",null==t.currentAppointment?null:t.currentAppointment.dateUser.dni),b.Ab(4),b.kc("ngModel",null==t.currentAppointment?null:t.currentAppointment.dateUser.dateofbirth),b.Ab(4),b.kc("ngModel",null==t.currentAppointment?null:t.currentAppointment.dateUser.email),b.Ab(4),b.kc("ngModel",null==t.currentAppointment?null:t.currentAppointment.dateUser.phone),b.Ab(4),b.kc("visible",t.displayModalEditAppointment)("modal",!0)("styleClass","modalAddEdit")("baseZIndex",1e4)("draggable",!1)("resizable",!1)("autoZIndex",!1),b.Ab(6),b.kc("ngModel",t.specialtyid),b.Ab(3),b.kc("ngForOf",t.specialties),b.Ab(4),b.kc("ngModel",t.doctorid),b.Ab(3),b.kc("ngForOf",t.doctors),b.Ab(4),b.kc("ngModel",t.date),b.Ab(3),b.kc("ngForOf",t.dataCalendarDoctor),b.Ab(4),b.kc("ngModel",t.hour),b.Ab(3),b.kc("ngForOf",t.hours),b.Ab(4),b.kc("baseZIndex",10001))},directives:[A.a,E.a,n.l,M.a,S.b,S.e,S.f,S.i,S.g,S.j,C.a,D.a,n.m],styles:["li[_ngcontent-%COMP%]:hover{background-color:#e1e9f4}"]}),e})()}];let P=(()=>{class e{}return e.\u0275mod=b.Mb({type:e}),e.\u0275inj=b.Lb({factory:function(t){return new(t||e)},imports:[[o.c.forChild(I)],o.c]}),e})(),$=(()=>{class e{}return e.\u0275mod=b.Mb({type:e}),e.\u0275inj=b.Lb({factory:function(t){return new(t||e)},imports:[[n.c,P,a.a,r.a,M.b,S.c,C.b,D.b]]}),e})()}}]);